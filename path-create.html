<html>
<head>
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css" />
  <link href="css/path-create.css" rel="stylesheet">
	<script src="http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
	<script src="//code.jquery.com/jquery-2.1.1.min.js"></script>

	<!-- Leaflet.draw -->
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.2.3/leaflet.draw.css" />
	<script src="//cdnjs.cloudflare.com/ajax/libs/leaflet.draw/0.2.3/leaflet.draw.js"></script>

	<style>
		html, body { margin: 0; padding: 0; }
		#map { width: 100%; height: 100%; }
	</style>
	<script type="text/javascript">
		$(document).ready(function(){

			// Set up the basic map
			var map = L.map('map').setView([40.014986, -105.270546], 13);

			L.tileLayer('http://{s}.tiles.mapbox.com/v3/oddityoverseer13.kalffo8a/{z}/{x}/{y}.png', {
			    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
			    maxZoom: 18
			}).addTo(map);

			var drawnItems = new L.FeatureGroup().addTo(map);

			var drawControl = new L.Control.Draw({
				draw: {
					polygon: false,
			        circle: false,
			        rectangle: false
			    },
				edit:{
					featureGroup: drawnItems
				}
			});

			map.addControl(drawControl);

			map.on('draw:created', function (e) {
			    var type = e.layerType,
			        layer = e.layer;

			    if (type === 'marker') {
			        layer.bindPopup(prompt("Enter marker title"));
			    }

			    drawnItems.addLayer(layer);
			});

			$('#save').click(function(){
				alert(JSON.stringify(drawnItems.toGeoJSON()));
			});

		});
	</script>
</head>
<body>
	<div id="header">
		<button id="save">Save</button>
	</div>
	<div id="map"></div>
</body>
</html